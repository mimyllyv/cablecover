<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Parametric Cable Cover Designer</title>
    <link rel="stylesheet" href="./style.css" />
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
          "three/examples/jsm/": "https://unpkg.com/three@0.160.0/examples/jsm/",
          "three-bvh-csg": "https://unpkg.com/three-bvh-csg@0.0.16/build/index.module.js",
          "three-mesh-bvh": "https://unpkg.com/three-mesh-bvh@0.7.0/build/index.module.js",
          "dxf-parser": "https://unpkg.com/dxf-parser@1.1.2/dist/dxf-parser.js"
        }
      }
    </script>
  </head>
  <body>
    <header class="main-header">
        <h1>Parametric Cable Cover Designer</h1>
    </header>
    <!-- Left Panel: Geometry Settings -->
    <div id="left-panel">
        
        <div class="panel" id="ui-container">
            <div class="panel-header"><h3>Straight Section</h3><span class="toggle-icon">▼</span></div>
            <div class="panel-content">
                <button id="add-straight" title="Create a straight rail section">
                    Straight
                </button>
                <div class="control-row">
                    <label for="length-input">Length (mm):</label>
                    <input type="number" id="length-input" value="100" step="0.1" min="1">
                </div>
            </div>
        </div>

        <div class="panel" id="angled-container">
            <div class="panel-header"><h3>Angled Section</h3><span class="toggle-icon">▼</span></div>
            <div class="panel-content">
                <div class="button-group">
                    <button id="create-horizontal" title="Create a vertical up/down turn">
                        Vertical
                    </button>
                    <button id="create-vertical" title="Create a flat left/right turn">
                        Horizontal
                    </button>
                </div>
                
                <div class="control-row">
                    <label for="angle-val">Angle (°):</label>
                    <input type="number" id="angle-val" value="90" min="-135" max="135">
                </div>
                <div class="control-row">
                    <label for="len1-val">Length 1 (mm):</label>
                    <input type="number" id="len1-val" value="100" min="1">
                </div>
                <div class="control-row">
                    <label for="len2-val">Length 2 (mm):</label>
                    <input type="number" id="len2-val" value="100" min="1">
                </div>
                <div class="control-row">
                    <label for="radius-val">Roundness (mm):</label>
                    <input type="number" id="radius-val" value="20" min="1">
                </div>
            </div>
        </div>

    </div>

    <!-- Right Panel: Holes & Export -->
    <div id="right-panel">

        <div class="panel" id="preview-container">
            <div class="panel-header"><h3>Profile Preview</h3><span class="toggle-icon">▼</span></div>
            <div class="panel-content">
                <div class="button-group" style="flex-direction: row; justify-content: space-around; margin-bottom: 5px;">
                    <button id="preview-rail-btn" style="flex: 1;">Rail</button>
                    <button id="preview-cover-btn" style="flex: 1;">Cover</button>
                    <button id="preview-connector-btn" style="flex: 1;">Conn</button>
                </div>
                <canvas id="profile-canvas" width="200" height="150" style="background: #222; border-radius: 4px;"></canvas>
            </div>
        </div>

        <div class="panel collapsed" id="profile-container">
            <div class="panel-header"><h3>Profile Properties</h3><span class="toggle-icon">▼</span></div>
            <div class="panel-content">
                <div class="control-row">
                    <label for="inner-width">Width (mm):</label>
                    <input type="number" id="inner-width" value="8.0" min="1" step="0.1">
                </div>
                <div class="control-row">
                    <label for="inner-height">Height (mm):</label>
                    <input type="number" id="inner-height" value="9.0" min="1" step="0.1">
                </div>
                <div class="control-row">
                    <label for="clearance-val">Clearance (mm):</label>
                    <input type="number" id="clearance-val" value="0.25" min="0.00" max="1.00" step="0.01">
                </div>
                
                <h4 style="margin: 10px 0 5px 0; color: #aaa; border-bottom: 1px solid #444;">Connector</h4>
                <div class="control-row">
                    <label for="conn-clearance">Conn. Clear (mm):</label>
                    <input type="number" id="conn-clearance" value="0.15" min="0.00" step="0.01">
                </div>
                <div class="control-row">
                    <label for="conn-length">Length (mm):</label>
                    <input type="number" id="conn-length" value="5.0" min="1.0" step="0.1">
                </div>
                <div class="control-row">
                    <label for="conn-wall">Wall T (mm):</label>
                    <input type="number" id="conn-wall" value="0.8" min="0.4" step="0.1">
                </div>
            </div>
        </div>

        <div class="panel" id="holes-container">
            <div class="panel-header"><h3>Holes</h3><span class="toggle-icon">▼</span></div>
            <div class="panel-content">
                <div class="control-row">
                    <label for="hole-count">Count:</label>
                    <input type="number" id="hole-count" value="2" min="0" step="1">
                </div>
                            <div class="control-row">
                                <label for="hole-diameter">Diameter (mm):</label>
                                <input type="number" id="hole-diameter" value="3.0" min="0.1" step="0.1">
                            </div>                <div class="control-row checkbox-row">
                    <input type="checkbox" id="show-holes" checked>
                    <label for="show-holes">Show Cutters</label>
                </div>
            </div>
        </div>

        <div class="panel collapsed" id="view-container">
            <div class="panel-header"><h3>View</h3><span class="toggle-icon">▼</span></div>
            <div class="panel-content">
                <div class="control-row checkbox-row" style="margin-top: 0; padding-top: 0; border-top: none;">
                    <input type="checkbox" id="show-rail" checked>
                    <label for="show-rail">Show Rail</label>
                </div>
                <div class="control-row checkbox-row" style="margin-top: 0; padding-top: 0; border-top: none;">
                    <input type="checkbox" id="show-cover" checked>
                    <label for="show-cover">Show Cover</label>
                </div>
            </div>
        </div>

        <div class="panel" id="export-container">
            <div class="panel-header"><h3>Export</h3><span class="toggle-icon">▼</span></div>
            <div class="panel-content">
                <button id="export-rail">Rail (.stl)</button>
                <button id="export-cover">Cover (.stl)</button>
                <button id="export-connector">Connector (.stl)</button>
            </div>
        </div>

    </div>

    <script type="module" src="./main.js"></script>
  </body>
</html>